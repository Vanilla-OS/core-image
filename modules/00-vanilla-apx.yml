name: apx
type: shell
source:
  type: tar
  # switch to production build once in production
  url: https://github.com/Vanilla-OS/apx/releases/download/continuous/apx.tar.gz
commands:
- mkdir -p /usr/bin
- cp /sources/apx /usr/bin/apx
- chmod +x /usr/bin/apx
- |
  echo '{\n\
    "apxPath": "/usr/share/apx",\n\
    "distroboxpath": "/usr/share/apx/distrobox/distrobox",\n\
    "storageDriver": "btrfs"\n\
  }' > /usr/share/apx/apx.json
modules:
- name: distrobox
  type: shell
  source:
    type: tar
    url: https://github.com/89luca89/distrobox/archive/refs/tags/1.5.0.2.tar.gz
  commands:
  - mkdir -p /usr/share/apx
  - cp -r /sources/distrobox-1.5.0.2 /usr/share/apx/distrobox
  - chmod +x /usr/share/apx/distrobox/distrobox*
- name: apx-manpage
  type: shell
  source:
    type: tar
    url: https://github.com/Vanilla-OS/apx/releases/download/continuous/apx-man.tar.gz
  commands:
  - mv /sources/apx-manpage/man/man1/apx.1 /usr/share/man/man1/
